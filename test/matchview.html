<!DOCTYPE html>
<!-- Note to self: don't autoformat this file using eclipse/aptana! It introduces unwanted visible spaces -->
<html lang="de">
<head>
<meta charset="utf-8" />
<title>Tuvero Test 1.5.4-dev</title>
<link rel="shortcut icon" href="images/favicon.png" type="image/png" />
<link rel="stylesheet" href="style/main.css" />
<style>
</style>
</head>

<body>
  <h3>TeamIDs only</h3>
  <div class="matchview simple">
    <span class="team"></span> vs. <span class="team"></span>
  </div>

  <h3>TeamViews</h3>
  <div class="matchview teamlist">
    <div class="team">
      <span class="teamno">##</span> <span class="name">%% %%</span> <span
        class="name">%% %%</span> <span class="name">%% %%</span>
    </div>
    <div class="team">
      <span class="teamno">##</span> <span class="name">%% %%</span> <span
        class="name">%% %%</span> <span class="name">%% %%</span>
    </div>

    <h3>ListView of MatchModels</h3>
    <div class="matchlist">
      <div class="matchview template">
        <div class="team">
          <span class="teamno">##</span> <span class="name">%% %%</span> <span
            class="name">%% %%</span> <span class="name">%% %%</span> <input
            class="points" type="number" value="0">
        </div>
        <div class="team">
          <span class="teamno">##</span> <span class="name">%% %%</span> <span
            class="name">%% %%</span> <span class="name">%% %%</span> <input
            class="points" type="number" value="0">
        </div>
        <button class="finish">finish</button>
        <br> <br>
      </div>
    </div>
  </div>

  <script id="testmain">
  function TestMain(Common, $) {
    var MatchModel, MatchView, IndexedListModel, TeamModel, PlayerModel,
        ListModel, ListView, Listener;
    
    IndexedListModel = Common('core/indexedlistmodel');
    ListModel = Common('core/listmodel');
    MatchModel = Common('core/matchmodel');
    MatchView = Common('ui/matchview');
    TeamModel = Common('ui/teammodel');
    PlayerModel = Common('ui/playermodel');
    ListView = Common('ui/listview');
    Listener = Common('core/listener');
  
    $(function($) {
      var $view, matchview, teamlist, matchlist, matchlistview;
  
      $view = $('.matchview.simple');
      matchview = new MatchView(new MatchModel([1,0], 0, 0), $view);
  
      teamlist = new IndexedListModel();
      
      teamlist.push(new TeamModel([new PlayerModel("Erik E. Lorenz"), new PlayerModel("Fabian Böttcher")]));
      teamlist.push(new TeamModel([new PlayerModel("Kai Angne"), new PlayerModel("Martin Richter")]));
      teamlist.push(new TeamModel([new PlayerModel("Petra Henning"), new PlayerModel("Detlef Schwede")]));
      teamlist.push(new TeamModel([new PlayerModel("Stefan Weigel"), new PlayerModel("Gert Schwarz")]));
      teamlist.push(new TeamModel([new PlayerModel("Marcel Neumann"), new PlayerModel("Antje Müller")]));
      
      $view = $('.matchview.teamlist');
      matchview = new MatchView(new MatchModel([Math.floor(Math.random()*teamlist.length),Math.floor(Math.random()*teamlist.length)], 0, 0), $view, teamlist);
      
      matchlist = new ListModel();
      do {
        match = new MatchModel([Math.floor(Math.random()*teamlist.length),Math.floor(Math.random()*teamlist.length)], 0, 0);
        matchlist.push(match);
        Listener.bind(match, 'finish', function(match){
          matchlist.erase(match);
        });
      } while (Math.random() < 0.5);
      
      $view = $('.matchlist');
      $template = $view.find('.template');
      matchlistview = new ListView(matchlist, $view, $template,
          MatchView.bindTeamList(teamlist));
          
      do {
        match = new MatchModel([Math.floor(Math.random()*teamlist.length),Math.floor(Math.random()*teamlist.length)], 0, 0);
        matchlist.push(match);
        Listener.bind(match, 'finish', function(match){
          matchlist.erase(match);
        });
      } while (Math.random() < 0.7);
    });
  }
  </script>
  <script data-main="scripts/testmain.js" src="scripts/require.js"></script>
</body>
</html>
